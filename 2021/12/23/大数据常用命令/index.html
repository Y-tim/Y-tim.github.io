<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>大数据常用命令 |  Y-tim</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css"
      />
      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
       
 
<script>
var _hmt = _hmt || [];
(function() {
	var hm = document.createElement("script");
	hm.src = "https://hm.baidu.com/hm.js?XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX";
	var s = document.getElementsByTagName("script")[0]; 
	s.parentNode.insertBefore(hm, s);
})();
</script>


      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      
      <canvas width="1777" height="841"
        style="position: fixed; left: 0px; top: 0px; z-index: 99999; pointer-events: none;"></canvas>
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-大数据常用命令"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  大数据常用命令
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2021/12/23/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="article-date">
  <time datetime="2021-12-23T03:37:05.239Z" itemprop="datePublished">2021-12-23</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/BigData/">BigData</a> / <a class="article-category-link" href="/categories/BigData/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">大数据常用命令</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">6.9k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">29 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="Linux（vi-vim）"><a href="#Linux（vi-vim）" class="headerlink" title="Linux（vi/vim）"></a>Linux（vi/vim）</h2><h3 id="一般模式"><a href="#一般模式" class="headerlink" title="一般模式"></a>一般模式</h3><table>
<thead>
<tr>
<th>语法</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td>yy</td>
<td>复制光标当前一行</td>
</tr>
<tr>
<td>y数字y</td>
<td>复制一段（从第几行到第几行）</td>
</tr>
<tr>
<td>p</td>
<td>箭头移动到目的行粘贴</td>
</tr>
<tr>
<td>u</td>
<td>撤销上一步</td>
</tr>
<tr>
<td>dd</td>
<td>删除光标当前行</td>
</tr>
<tr>
<td>d数字d</td>
<td>删除光标（含）后多少行</td>
</tr>
<tr>
<td>x</td>
<td>删除一个字母，相当于del</td>
</tr>
<tr>
<td>X</td>
<td>删除一个字母，相当于Backspace</td>
</tr>
<tr>
<td>yw</td>
<td>复制一个词</td>
</tr>
<tr>
<td>dw</td>
<td>删除一个词</td>
</tr>
<tr>
<td>shift+^</td>
<td>移动到行头</td>
</tr>
<tr>
<td>shift+$</td>
<td>移动到行尾</td>
</tr>
<tr>
<td>1+shift+g</td>
<td>移动到页头，数字</td>
</tr>
<tr>
<td>shift+g</td>
<td>移动到页尾</td>
</tr>
<tr>
<td>数字N+shift+g</td>
<td>移动到目标行</td>
</tr>
</tbody></table>
<h3 id="编辑模式"><a href="#编辑模式" class="headerlink" title="编辑模式"></a>编辑模式</h3><table>
<thead>
<tr>
<th>按键</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>i</td>
<td>当前光标前</td>
</tr>
<tr>
<td>a</td>
<td>当前光标后</td>
</tr>
<tr>
<td>o</td>
<td>当前光标行的下一行</td>
</tr>
<tr>
<td>I</td>
<td>光标所在行最前</td>
</tr>
<tr>
<td>A</td>
<td>光标所在行最后</td>
</tr>
<tr>
<td>O</td>
<td>当前光标行的上一行</td>
</tr>
</tbody></table>
<h3 id="指令模式"><a href="#指令模式" class="headerlink" title="指令模式"></a>指令模式</h3><table>
<thead>
<tr>
<th>命令</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>:w</td>
<td>保存</td>
</tr>
<tr>
<td>:q</td>
<td>退出</td>
</tr>
<tr>
<td>:!</td>
<td>强制执行</td>
</tr>
<tr>
<td>/要查找的词</td>
<td>n 查找下一个，N 往上查找</td>
</tr>
<tr>
<td>? 要查找的词</td>
<td>n是查找上一个，shift+n是往下查找</td>
</tr>
<tr>
<td>:set nu</td>
<td>显示行号</td>
</tr>
<tr>
<td>:set nonu</td>
<td>关闭行号</td>
</tr>
</tbody></table>
<h3 id="压缩和解压"><a href="#压缩和解压" class="headerlink" title="压缩和解压"></a>压缩和解压</h3><h4 id="gzip-gunzip-压缩"><a href="#gzip-gunzip-压缩" class="headerlink" title="gzip/gunzip 压缩"></a>gzip/gunzip 压缩</h4><p>（1）只能压缩文件不能压缩目录</p>
<p>（2）不保留原来的文件</p>
<p>gzip压缩：gzip hello.txt</p>
<p>gunzip解压缩文件：gunzip hello.txt.gz</p>
<h4 id="zip-unzip-压缩"><a href="#zip-unzip-压缩" class="headerlink" title="zip/unzip 压缩"></a>zip/unzip 压缩</h4><p>可以压缩目录且保留源文件</p>
<p>zip压缩（压缩 1.txt 和2.txt，压缩后的名称为mypackage.zip）：zip hello.zip hello.txt world.txt</p>
<p>unzip解压：unzip hello.zip</p>
<p>unzip解压到指定目录：unzip hello.zip -d /opt</p>
<h4 id="tar-打包"><a href="#tar-打包" class="headerlink" title="tar 打包"></a>tar 打包</h4><p>tar压缩多个文件：tar -zcvf hello.txt world.txt</p>
<p>tar压缩目录：tar -zcvf hello.tar.gz opt/</p>
<p>tar解压到当前目录：tar -zxvf hello.tar.gz</p>
<p>tar解压到指定目录：tar -zxvf hello.tar.gz -C /opt</p>
<h3 id="RPM"><a href="#RPM" class="headerlink" title="RPM"></a>RPM</h3><p>RPM查询命令：rpm -qa |grep firefox</p>
<p>RPM卸载命令：</p>
<p>rpm -e xxxxxx</p>
<p>rpm -e –nodeps xxxxxx（不检查依赖）</p>
<p>RPM安装命令：</p>
<p>rpm -ivh xxxxxx.rpm</p>
<p>rpm -ivh –nodeps fxxxxxx.rpm（–nodeps，不检测依赖进度）</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-i</td>
<td>-i=install，安装</td>
</tr>
<tr>
<td>-v</td>
<td>-v=verbose，显示详细信息</td>
</tr>
<tr>
<td>-h</td>
<td>-h=hash，进度条</td>
</tr>
<tr>
<td>–nodeps</td>
<td>–nodeps，不检测依赖进度</td>
</tr>
</tbody></table>
<hr>
<h2 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h2><h3 id="输入-输出重定向"><a href="#输入-输出重定向" class="headerlink" title="输入/输出重定向"></a>输入/输出重定向</h3><table>
<thead>
<tr>
<th>命令</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>command &gt; file</td>
<td>将输出重定向到 file</td>
</tr>
<tr>
<td>command &lt; file</td>
<td>将输入重定向到 file</td>
</tr>
<tr>
<td>command &gt;&gt; file</td>
<td>将输出以追加的方式重定向到 file</td>
</tr>
<tr>
<td>n &gt; file</td>
<td>将文件描述符为 n 的文件重定向到 file</td>
</tr>
<tr>
<td>n &gt;&gt; file</td>
<td>将文件描述符为 n 的文件以追加的方式重定向到 file</td>
</tr>
<tr>
<td>n &gt;&amp; m</td>
<td>将输出文件 m 和 n 合并</td>
</tr>
<tr>
<td>n &lt;&amp; m</td>
<td>将输入文件 m 和 n 合并</td>
</tr>
<tr>
<td>&lt;&lt; tag</td>
<td>将开始标记 tag 和结束标记 tag 之间的内容作为输入</td>
</tr>
</tbody></table>
<h3 id="脚本编辑"><a href="#脚本编辑" class="headerlink" title="脚本编辑"></a>脚本编辑</h3><table>
<thead>
<tr>
<th>快捷方式</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>shift</td>
<td>参数左移</td>
</tr>
<tr>
<td>$@</td>
<td>所有的参数</td>
</tr>
<tr>
<td>$#</td>
<td>参数的个数</td>
</tr>
</tbody></table>
<hr>
<h2 id="Hadoop"><a href="#Hadoop" class="headerlink" title="Hadoop"></a>Hadoop</h2><h3 id="启动类命令"><a href="#启动类命令" class="headerlink" title="启动类命令"></a>启动类命令</h3><table>
<thead>
<tr>
<th>功能说明</th>
<th>命令脚本</th>
</tr>
</thead>
<tbody><tr>
<td>启动hdfs集群</td>
<td>sbin/start-dfs.sh</td>
</tr>
<tr>
<td>启动yarn</td>
<td>sbin/start-yarn.sh</td>
</tr>
</tbody></table>
<h3 id="hadoop-fs-hdfs-dfs-命令"><a href="#hadoop-fs-hdfs-dfs-命令" class="headerlink" title="hadoop fs/hdfs dfs 命令"></a>hadoop fs/hdfs dfs 命令</h3><table>
<thead>
<tr>
<th>功能说明</th>
<th>命令</th>
</tr>
</thead>
<tbody><tr>
<td>创建目录</td>
<td>hdfs dfs -mkdir -p /data/flink</td>
</tr>
<tr>
<td>显示目录</td>
<td>hdfs dfs -ls /</td>
</tr>
<tr>
<td>从HDFS拷贝到本地</td>
<td>hdfs dfs -copyToLocal /data/data.txt ./</td>
</tr>
<tr>
<td>文件上传到集群(从本地)</td>
<td>hhdfs dfs -copyFromLocal data.txt /</td>
</tr>
<tr>
<td>文件下载</td>
<td>hdfs dfs -get /data/flink</td>
</tr>
<tr>
<td>删除集群的文件</td>
<td>hdfs dfs -rm /data/flink</td>
</tr>
<tr>
<td>删除文件夹</td>
<td>hdfs dfs -rm -r -skipTrash /data</td>
</tr>
<tr>
<td>从本地剪切粘贴到HDFS</td>
<td>hdfs dfs  -moveFromLocal data.txt /data/</td>
</tr>
<tr>
<td>追加一个文件到已经存在的文件末尾hdfs dfs -appendToFile data1.txt /data/data.txt</td>
<td></td>
</tr>
<tr>
<td>显示文件内容</td>
<td>hdfs dfs -cat data.txt</td>
</tr>
<tr>
<td>修改文件所属权限</td>
<td>hdfs dfs  -chmod  777 xxx.sh</td>
</tr>
<tr>
<td>修改文件所属用户组</td>
<td>hdfs dfs  -chown  root:root data.txt</td>
</tr>
<tr>
<td>从HDFS的一个路径拷贝到HDFS的另一个路径</td>
<td>hdfs dfs -cp data.txt /data1.txt</td>
</tr>
<tr>
<td>在HDFS目录中移动文件</td>
<td>hdfs dfs -mv data.txt /opt/</td>
</tr>
<tr>
<td>合并下载多个文件</td>
<td>hdfs dfs  -getmerge /data/* ./data_merge.txt</td>
</tr>
<tr>
<td>hadoop fs -put</td>
<td>等同于copyFromLocal</td>
</tr>
<tr>
<td>显示一个文件的末尾</td>
<td>hdfs dfs -tail data.txt</td>
</tr>
<tr>
<td>删除文件或文件夹</td>
<td>hdfs dfs -rm /data/data.txt</td>
</tr>
<tr>
<td>删除空目录</td>
<td>hdfs dfs -rmdir /data</td>
</tr>
<tr>
<td>统计文件夹的大小信息</td>
<td>hdfs dfs -s -h /data</td>
</tr>
<tr>
<td>统计文件夹下的文件大小信息</td>
<td>hdfs dfs  -h /data</td>
</tr>
<tr>
<td>设置HDFS中文件的副本数量</td>
<td>hdfs dfs -setrep 3 /data/data.txt</td>
</tr>
</tbody></table>
<h3 id="yarn命令"><a href="#yarn命令" class="headerlink" title="yarn命令"></a>yarn命令</h3><table>
<thead>
<tr>
<th>功能说明</th>
<th>命令</th>
</tr>
</thead>
<tbody><tr>
<td>查看正在运行的yarn任务列表</td>
<td>yarn application -list appID</td>
</tr>
<tr>
<td>kill掉指定id的yarn任务</td>
<td>yarn application -kill appID</td>
</tr>
<tr>
<td>查看任务日志信息</td>
<td>yarn logs -applicationId appID</td>
</tr>
</tbody></table>
<hr>
<h2 id="Zookeeper"><a href="#Zookeeper" class="headerlink" title="Zookeeper"></a>Zookeeper</h2><h3 id="启动命令"><a href="#启动命令" class="headerlink" title="启动命令"></a>启动命令</h3><table>
<thead>
<tr>
<th>功能说明</th>
<th>命令脚本</th>
</tr>
</thead>
<tbody><tr>
<td>启动zookeeper服务</td>
<td>zkServer.sh start</td>
</tr>
<tr>
<td>查看zookeeper状态</td>
<td>zkServer.sh status</td>
</tr>
<tr>
<td>停止zookeeper服务</td>
<td>zkServer.sh stop</td>
</tr>
<tr>
<td>启动zookeeper客户端</td>
<td>zkCli.sh -server 127.0.0.1:2181</td>
</tr>
<tr>
<td>退出zookeeper客户端</td>
<td>quit</td>
</tr>
</tbody></table>
<h3 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h3><table>
<thead>
<tr>
<th>功能说明</th>
<th>命令脚本</th>
</tr>
</thead>
<tbody><tr>
<td>当前znode中所包含的内容</td>
<td>ls /</td>
</tr>
<tr>
<td>创建普通节点(前面是节点的路径，后面是值）</td>
<td>create /bigdata/flink “flink”</td>
</tr>
<tr>
<td>获取节点的值</td>
<td>get /bigdata</td>
</tr>
<tr>
<td>修改节点的值</td>
<td>set /bigdata/flink “flinksql”</td>
</tr>
<tr>
<td>删除节点</td>
<td>delete /bigdata/flink</td>
</tr>
<tr>
<td>递归删除节点</td>
<td>rmr /bigdata</td>
</tr>
</tbody></table>
<h3 id="四字母命令"><a href="#四字母命令" class="headerlink" title="四字母命令"></a>四字母命令</h3><table>
<thead>
<tr>
<th>命令</th>
<th>功能说明</th>
<th>例子</th>
</tr>
</thead>
<tbody><tr>
<td>conf</td>
<td>zk服务配置的详细信息</td>
<td>echo conf | nc 127.0.0.1 2181</td>
</tr>
<tr>
<td>stat</td>
<td>客户端与zk连接的简要信息</td>
<td>参考上面</td>
</tr>
<tr>
<td>srvr</td>
<td>zk服务的详细信息</td>
<td>参考上面</td>
</tr>
<tr>
<td>cons</td>
<td>客户端与zk连接的详细信息</td>
<td>参考上面</td>
</tr>
<tr>
<td>mntr</td>
<td>zk服务目前的性能状况</td>
<td>参考上面</td>
</tr>
<tr>
<td>crst</td>
<td>重置当前的所有连接、会话</td>
<td>参考上面</td>
</tr>
<tr>
<td>dump</td>
<td>列出未经处理的会话和连接信息</td>
<td>参考上面</td>
</tr>
<tr>
<td>envi</td>
<td>列出zk的版本信息、主机名称、Java版本、服务器名称等等</td>
<td>参考上面</td>
</tr>
<tr>
<td>ruok</td>
<td>测试服务器是否正在运行，如果在运行返回imok，否则返回空</td>
<td>参考上面</td>
</tr>
<tr>
<td>srst</td>
<td>重置Zookeeper的所有统计信息</td>
<td>参考上面</td>
</tr>
<tr>
<td>wchs</td>
<td>列出watch的总数，连接数</td>
<td>参考上面</td>
</tr>
<tr>
<td>wchp</td>
<td>列出所有watch的路径及sessionID</td>
<td>参考上面</td>
</tr>
<tr>
<td>mntr</td>
<td>列出集群的关键性能数据，包括zk的版本、node数量、临时节点数等等</td>
<td>参考上面</td>
</tr>
</tbody></table>
<hr>
<h2 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h2><p><strong>注:</strong> 这里机器我只写一个。命令你们也可使用 ./bin/xx.sh (如：./bin/kafka-topics.sh) </p>
<h3 id="查看当前服务器中的所有topic"><a href="#查看当前服务器中的所有topic" class="headerlink" title="查看当前服务器中的所有topic"></a>查看当前服务器中的所有topic</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics --zookeeper xxxxxx:2181 --list --exclude-internal </span><br><span class="line"></span><br><span class="line">说明：</span><br><span class="line"></span><br><span class="line">exclude-internal：排除kafka内部topic</span><br><span class="line"></span><br><span class="line">比如： --exclude-internal  --topic &quot;test_.*&quot;</span><br></pre></td></tr></table></figure>

<h3 id="创建topic"><a href="#创建topic" class="headerlink" title="创建topic"></a>创建topic</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics --zookeeper xxxxxx:2181  --create </span><br><span class="line">--replication-factor </span><br><span class="line">--partitions 1 </span><br><span class="line">--topic topic_name</span><br><span class="line"></span><br><span class="line">说明：</span><br><span class="line"></span><br><span class="line">--topic 定义topic名</span><br><span class="line"></span><br><span class="line">--replication-factor  定义副本数</span><br><span class="line"></span><br><span class="line">--partitions  定义分区数</span><br></pre></td></tr></table></figure>

<h3 id="删除topic"><a href="#删除topic" class="headerlink" title="删除topic"></a>删除topic</h3><p><strong>注意:</strong> 需要server.properties中设置delete.topic.enable=true否则只是标记删除</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics --zookeeper xxxxxx:2181 --delete --topic topic_name</span><br></pre></td></tr></table></figure>

<h3 id="生产者"><a href="#生产者" class="headerlink" title="生产者"></a>生产者</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kafka-console-producer --broker-list xxxxxx:9092 --topic topic_name</span><br><span class="line"></span><br><span class="line">可加：--property parse.key=true（有key消息）</span><br></pre></td></tr></table></figure>

<h3 id="消费者"><a href="#消费者" class="headerlink" title="消费者"></a>消费者</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">kafka-console-consumer --bootstrap-server xxxxxx:9092 --topic topic_name</span><br><span class="line"></span><br><span class="line">注：可选</span><br><span class="line"></span><br><span class="line">--from-beginning：会把主题中以往所有的数据都读取出来</span><br><span class="line"></span><br><span class="line">--whitelist &#x27;.*&#x27; ：消费所有的topic</span><br><span class="line"></span><br><span class="line">--property print.key=true：显示key进行消费</span><br><span class="line"></span><br><span class="line">--partition 0：指定分区消费</span><br><span class="line"></span><br><span class="line">--offset：指定起始偏移量消费</span><br></pre></td></tr></table></figure>

<h3 id="查看某个Topic的详情"><a href="#查看某个Topic的详情" class="headerlink" title="查看某个Topic的详情"></a>查看某个Topic的详情</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics --zookeeper xxxxxx:2181 --describe --topic topic_name</span><br></pre></td></tr></table></figure>

<h3 id="修改分区数"><a href="#修改分区数" class="headerlink" title="修改分区数"></a>修改分区数</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics --zookeeper xxxxxx:2181 --alter --topic topic_name --partitions 6</span><br></pre></td></tr></table></figure>

<h3 id="查看某个消费者组信息"><a href="#查看某个消费者组信息" class="headerlink" title="查看某个消费者组信息"></a>查看某个消费者组信息</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-consumer-groups --bootstrap-server  xxxxxx:9092  --describe --group group_name </span><br></pre></td></tr></table></figure>

<h3 id="删除消费者组"><a href="#删除消费者组" class="headerlink" title="删除消费者组"></a>删除消费者组</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-consumer-groups --bootstrap-server  xxxxxx:9092  ---delete --group group_name </span><br></pre></td></tr></table></figure>

<h3 id="重置offset"><a href="#重置offset" class="headerlink" title="重置offset"></a>重置offset</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-consumer-groups --bootstrap-server  xxxxxx:9092  --group group_name--reset-offsets --all-topics --to-latest --execute </span><br></pre></td></tr></table></figure>

<h3 id="leader重新选举"><a href="#leader重新选举" class="headerlink" title="leader重新选举"></a>leader重新选举</h3><p>指定Topic指定分区用重新PREFERRED：优先副本策略 进行Leader重选举</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-leader-election --bootstrap-server xxxxxx:9092 --topic topic_name --election-type PREFERRED --partition 0</span><br></pre></td></tr></table></figure>

<p>所有Topic所有分区用重新PREFERRED：优先副本策略 进行Leader重选举</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-leader-election --bootstrap-server xxxxxx:9092 --election-type preferred  --all-topic-partitions</span><br></pre></td></tr></table></figure>

<h3 id="查询kafka版本信息"><a href="#查询kafka版本信息" class="headerlink" title="查询kafka版本信息"></a>查询kafka版本信息</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-configs --bootstrap-server xxxxxx:9092--describe --version</span><br></pre></td></tr></table></figure>

<h3 id="增删改配置"><a href="#增删改配置" class="headerlink" title="增删改配置"></a>增删改配置</h3><table>
<thead>
<tr>
<th>功能说明</th>
<th>参数</th>
</tr>
</thead>
<tbody><tr>
<td>选择类型</td>
<td>–entity-type (topics/clients/users/brokers/broker- loggers)</td>
</tr>
<tr>
<td>类型名称</td>
<td>–entity-name</td>
</tr>
<tr>
<td>删除配置</td>
<td>–delete-config k1=v1,k2=v2</td>
</tr>
<tr>
<td>添加/修改配置</td>
<td>–add-config k1,k2</td>
</tr>
</tbody></table>
<p>topic添加/修改动态配置</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-configs --bootstrap-server xxxxxx:9092--alter --entity-type topics --entity-name topic_name --add-config file.delete.delay.ms=222222,retention.ms=999999</span><br></pre></td></tr></table></figure>

<p>topic删除动态配置</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-configs --bootstrap-server xxxxxx:9092 --alter --entity-type topics --entity-name topic_name --delete-config file.delete.delay.ms,retention.ms</span><br></pre></td></tr></table></figure>

<h3 id="持续批量拉取消息"><a href="#持续批量拉取消息" class="headerlink" title="持续批量拉取消息"></a>持续批量拉取消息</h3><p>单次最大消费10条消息(不加参数意为持续消费)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-verifiable-consumer --bootstrap-server xxxxxx:9092 --group group_name--topic topic_name --max-messages 10</span><br></pre></td></tr></table></figure>

<h3 id="删除指定分区的消息"><a href="#删除指定分区的消息" class="headerlink" title="删除指定分区的消息"></a>删除指定分区的消息</h3><p>删除指定topic的某个分区的消息删除至offset为1024</p>
<p>json文件offset-json-file.json</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;    &quot;partitions&quot;: [        &#123;            &quot;topic&quot;: &quot;topic_name&quot;,            &quot;partition&quot;: 0,            &quot;offset&quot;: 1024        &#125;    ],    &quot;version&quot;: 1&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-delete-records --bootstrap-server xxxxxx:9092 --offset-json-file offset-json-file.json</span><br></pre></td></tr></table></figure>

<h3 id="查看Broker磁盘信息"><a href="#查看Broker磁盘信息" class="headerlink" title="查看Broker磁盘信息"></a>查看Broker磁盘信息</h3><p>查询指定topic磁盘信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-log-dirs --bootstrap-server xxxxxx:9090 --describe --topic-list topic1,topic2</span><br></pre></td></tr></table></figure>

<p>查询指定Broker磁盘信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-log-dirs --bootstrap-server xxxxxx:9090 --describe --topic-list topic1 --broker-list 0</span><br></pre></td></tr></table></figure>

<h2 id="Hive"><a href="#Hive" class="headerlink" title="Hive"></a>Hive</h2><h3 id="启动类"><a href="#启动类" class="headerlink" title="启动类"></a>启动类</h3><table>
<thead>
<tr>
<th>功能说明</th>
<th>命令</th>
</tr>
</thead>
<tbody><tr>
<td>启动hiveserver2服务</td>
<td>bin/hiveserver2</td>
</tr>
<tr>
<td>启动beeline</td>
<td>bin/beeline</td>
</tr>
<tr>
<td>连接hiveserver2</td>
<td>beeline&gt; !connect jdbc:hive2://hadoop102:10000</td>
</tr>
<tr>
<td>metastroe服务</td>
<td>bin/hive –service metastore</td>
</tr>
</tbody></table>
<p>hive 启动元数据服务（metastore和hiveserver2）和优雅关闭脚本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">启动： hive.sh start关闭： hive.sh stop重启： hive.sh restart状态： hive.sh status</span><br></pre></td></tr></table></figure>

<p>脚本如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bashHIVE_LOG_DIR=$HIVE_HOME/logsmkdir -p $HIVE_LOG_DIR#检查进程是否运行正常，参数1为进程名，参数2为进程端口function check_process()&#123;    pid=$(ps -ef 2&gt;/dev/null | grep -v grep | grep -i $1 | awk &#x27;&#123;print $2&#125;&#x27;)    ppid=$(netstat -nltp 2&gt;/dev/null | grep $2 | awk &#x27;&#123;print $7&#125;&#x27; | cut -d &#x27;/&#x27; -f 1)    echo $pid    [[ &quot;$pid&quot; =~ &quot;$ppid&quot; ]] &amp;&amp; [ &quot;$ppid&quot; ] &amp;&amp; return 0 || return 1&#125;function hive_start()&#123;    metapid=$(check_process HiveMetastore 9083)    cmd=&quot;nohup hive --service metastore &gt;$HIVE_LOG_DIR/metastore.log 2&gt;&amp;1 &amp;&quot;    cmd=$cmd&quot; sleep4; hdfs dfsadmin -safemode wait &gt;/dev/null 2&gt;&amp;1&quot;    [ -z &quot;$metapid&quot; ] &amp;&amp; eval $cmd || echo &quot;Metastroe服务已启动&quot;    server2pid=$(check_process HiveServer2 10000)    cmd=&quot;nohup hive --service hiveserver2 &gt;$HIVE_LOG_DIR/hiveServer2.log 2&gt;&amp;1 &amp;&quot;    [ -z &quot;$server2pid&quot; ] &amp;&amp; eval $cmd || echo &quot;HiveServer2服务已启动&quot;&#125;function hive_stop()&#123;    metapid=$(check_process HiveMetastore 9083)    [ &quot;$metapid&quot; ] &amp;&amp; kill $metapid || echo &quot;Metastore服务未启动&quot;    server2pid=$(check_process HiveServer2 10000)    [ &quot;$server2pid&quot; ] &amp;&amp; kill $server2pid || echo &quot;HiveServer2服务未启动&quot;&#125;case $1 in&quot;start&quot;)    hive_start    ;;&quot;stop&quot;)    hive_stop    ;;&quot;restart&quot;)    hive_stop    sleep 2    hive_start    ;;&quot;status&quot;)    check_process HiveMetastore 9083 &gt;/dev/null &amp;&amp; echo &quot;Metastore服务运行正常&quot; || echo &quot;Metastore服务运行异常&quot;    check_process HiveServer2 10000 &gt;/dev/null &amp;&amp; echo &quot;HiveServer2服务运行正常&quot; || echo &quot;HiveServer2服务运行异常&quot;    ;;*)    echo Invalid Args!    echo &#x27;Usage: &#x27;$(basename $0)&#x27; start|stop|restart|status&#x27;    ;;esac</span><br></pre></td></tr></table></figure>

<h3 id="常用交互命令"><a href="#常用交互命令" class="headerlink" title="常用交互命令"></a>常用交互命令</h3><table>
<thead>
<tr>
<th>功能说明</th>
<th>命令</th>
</tr>
</thead>
<tbody><tr>
<td>不进入hive的交互窗口执行sql</td>
<td>bin/hive -e “sql语句”</td>
</tr>
<tr>
<td>执行脚本中sql语句</td>
<td>bin/hive -f hive.sql</td>
</tr>
<tr>
<td>退出hive窗口</td>
<td>exit 或 quit</td>
</tr>
<tr>
<td>命令窗口中查看hdfs文件系统</td>
<td>dfs -ls /</td>
</tr>
<tr>
<td>命令窗口中查看hdfs文件系统</td>
<td>! ls /data/h</td>
</tr>
</tbody></table>
<h3 id="SQL类-特殊的"><a href="#SQL类-特殊的" class="headerlink" title="SQL类(特殊的)"></a>SQL类(特殊的)</h3><table>
<thead>
<tr>
<th>说明</th>
<th>语句</th>
</tr>
</thead>
<tbody><tr>
<td>查看hive中的所有数据库</td>
<td>show databases</td>
</tr>
<tr>
<td>用default数据库</td>
<td>use default</td>
</tr>
<tr>
<td>查询表结构</td>
<td>desc table_name</td>
</tr>
<tr>
<td>查看数据库</td>
<td>show databases</td>
</tr>
<tr>
<td>重命名表名</td>
<td>alter table table1 rename to table2</td>
</tr>
<tr>
<td>修改表中字段</td>
<td>alter table table_name change name user_name String</td>
</tr>
<tr>
<td>修改字段类型</td>
<td>alter table table_name change salary salary Double</td>
</tr>
<tr>
<td>创建外部表</td>
<td>create external table ….</td>
</tr>
<tr>
<td>查询外部表信息</td>
<td>desc formatted outsidetable</td>
</tr>
<tr>
<td>创建视图</td>
<td>create view view_name as select * from table_name …..</td>
</tr>
<tr>
<td>添加数据</td>
<td>load data local inpath ‘xxx’  overwrite into table table_name partition(day=’2021-12-01’)</td>
</tr>
</tbody></table>
<h3 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h3><p>（1） NVL</p>
<p>给值为NULL的数据赋值，它的格式是NVL( value，default_value)。它的功能是如果value为NULL，则NVL函数返回default_value的值，否则返回value的值，如果两个参数都为NULL ，则返回NULL</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select nvl(column, 0) from xxx；</span><br></pre></td></tr></table></figure>

<p>（2）行转列</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>CONCAT(string A/col, string B/col…)</td>
<td>返回输入字符串连接后的结果，支持任意个输入字符串</td>
</tr>
<tr>
<td>CONCAT_WS(separator, str1, str2,…)</td>
<td>第一个参数参数间的分隔符，如果分隔符是 NULL，返回值也将为 NULL。这个函数会跳过分隔符参数后的任何 NULL 和空字符串。分隔符将被加到被连接的字符串之间。</td>
</tr>
<tr>
<td>COLLECT_SET(col)</td>
<td>将某字段的值进行去重汇总，产生array类型字段</td>
</tr>
<tr>
<td>COLLECT_LIST(col)</td>
<td>函数只接受基本数据类型，它的主要作用是将某字段的值进行不去重汇总，产生array类型字段。</td>
</tr>
</tbody></table>
<p>（3）列转行(一列转多行)</p>
<p><strong>Split(str, separator)：</strong> 将字符串按照后面的分隔符切割，转换成字符array。</p>
<p><strong>EXPLODE(col)：</strong><br>将hive一列中复杂的array或者map结构拆分成多行。</p>
<p><strong>LATERAL VIEW</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">用法：LATERAL VIEW udtf(expression) tableAlias AS columnAlias</span><br></pre></td></tr></table></figure>

<p>解释：lateral view用于和split, explode等UDTF一起使用，它能够将一行数据拆成多行数据，在此基础上可以对拆分后的数据进行聚合。</p>
<p>lateral view首先为原始表的每行调用UDTF，UDTF会把一行拆分成一或者多行，lateral view再把结果组合，产生一个支持别名表的虚拟表。</p>
<p><strong>准备数据源测试</strong></p>
<table>
<thead>
<tr>
<th>movie</th>
<th>category</th>
</tr>
</thead>
<tbody><tr>
<td>《功勋》</td>
<td>记录,剧情</td>
</tr>
<tr>
<td>《战狼2》</td>
<td>战争,动作,灾难</td>
</tr>
</tbody></table>
<p><strong>SQL</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT movie,category_name FROM movie_info lateral VIEWexplode(split(category,&quot;,&quot;)) movie_info_tmp  AS category_name ;</span><br></pre></td></tr></table></figure>

<p><strong>测试结果</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">《功勋》      记录《功勋》      剧情《战狼2》     战争《战狼2》     动作《战狼2》     灾难</span><br></pre></td></tr></table></figure>

<h3 id="窗口函数"><a href="#窗口函数" class="headerlink" title="窗口函数"></a>窗口函数</h3><p>（1）OVER()</p>
<p>定分析函数工作的数据窗口大小，这个数据窗口大小可能会随着行的变而变化。</p>
<p>（2）CURRENT ROW（当前行）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n PRECEDING：往前n行数据n FOLLOWING：往后n行数据</span><br></pre></td></tr></table></figure>

<p>（3）UNBOUNDED（无边界）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UNBOUNDED PRECEDING 前无边界，表示从前面的起点UNBOUNDED FOLLOWING后无边界，表示到后面的终点</span><br></pre></td></tr></table></figure>

<p><strong>SQL案例：由起点到当前行的聚合</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select     sum(money) over(partition by user_id order by pay_time rows between UNBOUNDED PRECEDING and current row) from or_order;</span><br></pre></td></tr></table></figure>

<p><strong>SQL案例：当前行和前面一行做聚合</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select     sum(money) over(partition by user_id order by pay_time rows between 1 PRECEDING and current row) from or_order;</span><br></pre></td></tr></table></figure>

<p><strong>SQL案例：当前行和前面一行和后一行做聚合</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select     sum(money) over(partition by user_id order by pay_time rows between 1 PRECEDING AND 1 FOLLOWING )from or_order;</span><br></pre></td></tr></table></figure>

<p><strong>SQL案例：当前行及后面所有行</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select     sum(money) over(partition by user_id order by pay_time rows between current row and UNBOUNDED FOLLOWING  )from or_order;</span><br></pre></td></tr></table></figure>

<p>（4）LAG(col,n,default_val)</p>
<p>往前第n行数据，没有的话default_val</p>
<p>（5）LEAD(col,n, default_val)</p>
<p>往后第n行数据，没有的话default_val</p>
<p><strong>SQL案例：查询用户购买明细以及上次的购买时间和下次购买时间</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 	user_id,,pay_time,money,		lag(pay_time,1,&#x27;1970-01-01&#x27;) over(PARTITION by name order by pay_time) prev_time,		lead(pay_time,1,&#x27;1970-01-01&#x27;) over(PARTITION by name order by pay_time) next_timefrom or_order;</span><br></pre></td></tr></table></figure>

<p>（6）FIRST_VALUE(col,true/false)</p>
<p>当前窗口下的第一个值，第二个参数为true，跳过空值。</p>
<p>（7）LAST_VALUE (col,true/false)</p>
<p>当前窗口下的最后一个值，第二个参数为true，跳过空值。</p>
<p><strong>SQL案例：查询用户每个月第一次的购买时间 和 每个月的最后一次购买时间</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select	FIRST_VALUE(pay_time) 	    over(	        partition by user_id,month(pay_time) order by pay_time 	        rows between UNBOUNDED PRECEDING and UNBOUNDED FOLLOWING	        ) first_time,		LAST_VALUE(pay_time) 	    over(partition by user_id,month(pay_time) order by pay_time rows between UNBOUNDED PRECEDING and UNBOUNDED FOLLOWING	    ) last_timefrom or_order;</span><br></pre></td></tr></table></figure>


<p>（8）NTILE(n)</p>
<p>把有序窗口的行分发到指定数据的组中，各个组有编号，编号从1开始，对于每一行，NTILE返回此行所属的组的编号。（用于将分组数据按照顺序切分成n片，返回当前切片值）</p>
<p><strong>SQL案例：查询前25%时间的订单信息</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from (    select User_id,pay_time,money,        ntile(4) over(order by pay_time) sorted        from or_order) twhere sorted = 1;</span><br></pre></td></tr></table></figure>

<h3 id="4个By"><a href="#4个By" class="headerlink" title="4个By"></a>4个By</h3><p>（1）Order By</p>
<p>全局排序，只有一个Reducer。</p>
<p>（2）Sort By</p>
<p>分区内有序。</p>
<p>（3）Distrbute By</p>
<p>类似MR中Partition，进行分区，结合sort by使用。</p>
<p>（4） Cluster By</p>
<p>当Distribute by和Sorts by字段相同时，可以使用Cluster by方式。Cluster by除了具有Distribute by的功能外还兼具Sort by的功能。但是排序只能是升序排序，不能指定排序规则为ASC或者DESC。</p>
<p>在生产环境中Order By用的比较少，容易导致OOM。</p>
<p>在生产环境中Sort By+ Distrbute By用的多。</p>
<h3 id="排序函数"><a href="#排序函数" class="headerlink" title="排序函数"></a>排序函数</h3><p>（1）RANK() </p>
<p>排序相同时会重复，总数不会变</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">11335</span><br></pre></td></tr></table></figure>

<p>（2）DENSE_RANK() </p>
<p>排序相同时会重复，总数会减少</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">11223</span><br></pre></td></tr></table></figure>

<p>（3）ROW_NUMBER()</p>
<p>会根据顺序计算</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">12345</span><br></pre></td></tr></table></figure>

<h3 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h3><p>datediff：返回结束日期减去开始日期的天数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">datediff(string enddate, string startdate) select datediff(&#x27;2021-11-20&#x27;,&#x27;2021-11-22&#x27;) </span><br></pre></td></tr></table></figure>

<p>date_add：返回开始日期startdate增加days天后的日期</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date_add(string startdate, int days) select date_add(&#x27;2021-11-20&#x27;,3) </span><br></pre></td></tr></table></figure>

<p>date_sub：返回开始日期startdate减少days天后的日期</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date_sub (string startdate, int days) select date_sub(&#x27;2021-11-22&#x27;,3)</span><br></pre></td></tr></table></figure>

<h2 id="Impala-时间处理，可类比到hive可用"><a href="#Impala-时间处理，可类比到hive可用" class="headerlink" title="Impala(时间处理，可类比到hive可用)"></a>Impala(时间处理，可类比到hive可用)</h2><h3 id="1-获取当前时间"><a href="#1-获取当前时间" class="headerlink" title="1. 获取当前时间"></a>1. 获取当前时间</h3><p>timestamp 样式2021-12-10 04:36:48.147046000</p>
<p>bigint 样式 1639110956</p>
<table>
<thead>
<tr>
<th>函数/方法</th>
<th>输出类型</th>
<th>说明/样式</th>
</tr>
</thead>
<tbody><tr>
<td>current_timestamp()</td>
<td>timestamp</td>
<td>所在时区的当前时间</td>
</tr>
<tr>
<td>now()</td>
<td>timestamp</td>
<td>所在时区的当前时间</td>
</tr>
<tr>
<td>unix_timestamp()</td>
<td>bigint</td>
<td>所在时区的当前时间戳</td>
</tr>
<tr>
<td>utc_timestamp</td>
<td>timestamp</td>
<td>UTC时区的当前时间</td>
</tr>
<tr>
<td>timeofday()</td>
<td>string</td>
<td>Fri Dec 10 12:39:46 2021 CST</td>
</tr>
</tbody></table>
<h3 id="2-获取时间指定单位函数"><a href="#2-获取时间指定单位函数" class="headerlink" title="2. 获取时间指定单位函数"></a>2. 获取时间指定单位函数</h3><table>
<thead>
<tr>
<th>序号</th>
<th>函数/方法</th>
<th>输出类型</th>
<th>说明/样式</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>year(timestamp/date)</td>
<td>int</td>
<td>获取年 yyyy</td>
</tr>
<tr>
<td>2</td>
<td>quarter(timestamp/date)</td>
<td>int</td>
<td>获取季节（1,2,3,4）</td>
</tr>
<tr>
<td>3</td>
<td>month(timestamp/date)</td>
<td>int</td>
<td>获取月</td>
</tr>
<tr>
<td>4</td>
<td>monthname(timestamp/date)</td>
<td>string</td>
<td>获取月份名称 December</td>
</tr>
<tr>
<td>5</td>
<td>week(timestamp/date)</td>
<td>int</td>
<td>获取周（1-53）</td>
</tr>
<tr>
<td>6</td>
<td>weekofyear(timestamp/date)</td>
<td>int</td>
<td>获取周（1-53）</td>
</tr>
<tr>
<td>7</td>
<td>dayofweek(timestamp/date)</td>
<td>int</td>
<td>获取天（本周第多少天,周日算第一天）</td>
</tr>
<tr>
<td>8</td>
<td>dayname(timestamp/date)</td>
<td>string</td>
<td>获取天（星期几）Friday</td>
</tr>
<tr>
<td>9</td>
<td>next_day(timestamp/date, 10</td>
<td>day(string))</td>
<td>timestamp/date</td>
</tr>
<tr>
<td>11</td>
<td>day(timestamp/date)</td>
<td>int</td>
<td>获取天（本月第多少天）</td>
</tr>
<tr>
<td>12</td>
<td>dayofmonth(timestamp/date)</td>
<td>int</td>
<td>获取天（本月第多少天）</td>
</tr>
<tr>
<td>13</td>
<td>last_day(timestamp/date)</td>
<td>timestamp/date</td>
<td>获取天（本月的最后一天日期）</td>
</tr>
<tr>
<td>14</td>
<td>dayofyear(timestamp/date)</td>
<td>int</td>
<td>获取天（本年第多少天）</td>
</tr>
<tr>
<td>15</td>
<td>hour(timestamp/date)</td>
<td>int</td>
<td>获取小时</td>
</tr>
<tr>
<td>16</td>
<td>minute(timestamp date)</td>
<td>int</td>
<td>获取分钟</td>
</tr>
<tr>
<td>17</td>
<td>second(timestamp date)</td>
<td>int</td>
<td>获取秒</td>
</tr>
<tr>
<td>18</td>
<td>millisecond(timestamp date)</td>
<td>int</td>
<td>获取毫秒</td>
</tr>
<tr>
<td>19</td>
<td>extract (YEAR FROM timestamp)</td>
<td>bigint</td>
<td>获取参数指定的时间单位 YEAR MONTH DAY  HOUR MINUTE SECOND</td>
</tr>
<tr>
<td>20</td>
<td>date_part(‘year’,timestamp)</td>
<td>bigint</td>
<td>获取参数指定的时间单位 YEAR MONTH DAY  HOUR MINUTE SECOND</td>
</tr>
<tr>
<td>21</td>
<td>trunc(timestamp/date,unit)</td>
<td>timestamp/date</td>
<td>获取截断为指定单位的时间</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>unit</th>
<th>截取说明</th>
</tr>
</thead>
<tbody><tr>
<td>SYYYY，YYYY，YEAR，SYEAR，YYY，YY，Y</td>
<td>年</td>
</tr>
<tr>
<td>Q</td>
<td>季节</td>
</tr>
<tr>
<td>MONTH，MON，MM，RM</td>
<td>月</td>
</tr>
<tr>
<td>WW</td>
<td>最近的日期是与一年中的第一天相同的日期</td>
</tr>
<tr>
<td>W</td>
<td>最近的日期是与该月的第一天相同的星期几</td>
</tr>
<tr>
<td>DDD，DD，J</td>
<td>天</td>
</tr>
<tr>
<td>DAY，DY，D</td>
<td>星期几（星期一）的开始</td>
</tr>
<tr>
<td>HH，HH12，HH24</td>
<td>小时</td>
</tr>
<tr>
<td>MI</td>
<td>分钟</td>
</tr>
</tbody></table>
<h3 id="3-时间比较函数"><a href="#3-时间比较函数" class="headerlink" title="3. 时间比较函数"></a>3. 时间比较函数</h3><table>
<thead>
<tr>
<th>序号</th>
<th>函数/方法</th>
<th>输出类型</th>
<th>说明/样式</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>datediff(timestamp enddate,startdate)</td>
<td>int</td>
<td>返回endDate比startDate多多少天</td>
</tr>
<tr>
<td>2</td>
<td>int_months_between(timestamp t1,t2)</td>
<td>int</td>
<td>返回两个日期相差的整数月份个数</td>
</tr>
<tr>
<td>3</td>
<td>months_between(timestamp t1,t2)</td>
<td>double</td>
<td>返回浮点数的月数相差的数</td>
</tr>
<tr>
<td>4</td>
<td>date_cmp(DATE date1, DATE date2)</td>
<td>int</td>
<td>比较是否相等，返回-1,0,1,null四种数值</td>
</tr>
<tr>
<td>5</td>
<td>timestamp_cmp(timestamp t1，timestamp t2)</td>
<td>int</td>
<td>比较是否相等，返回-1,0,1,null四种数值</td>
</tr>
</tbody></table>
<h3 id="4-时间格式转换函数"><a href="#4-时间格式转换函数" class="headerlink" title="4. 时间格式转换函数"></a>4. 时间格式转换函数</h3><table>
<thead>
<tr>
<th>序号</th>
<th>函数/方法</th>
<th>输出类型</th>
<th>说明/样式</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>to_date(timestamp date)</td>
<td>string</td>
<td>返回时间戳对应的date</td>
</tr>
<tr>
<td>2</td>
<td>to_timestamp(bigint unixtime)</td>
<td>timestamp</td>
<td>返回整数对应的timestamp值</td>
</tr>
<tr>
<td>3</td>
<td>to_timestamp(string date，string pattern)</td>
<td>timestamp</td>
<td>返回字符串对应的timestamp值</td>
</tr>
<tr>
<td>4</td>
<td>to_utc_timestamp(timestamp t，string timezone)</td>
<td>timestamp</td>
<td>指定时区的时间戳转化为UTC时区的时间戳</td>
</tr>
<tr>
<td>5</td>
<td>from_timestamp(timestamp t，string pattern)</td>
<td>string</td>
<td>把timestamp按照pattern进行格式化</td>
</tr>
<tr>
<td>6</td>
<td>from_timestamp(string date，string pattern)</td>
<td>string</td>
<td>把date按照pattern进行格式化</td>
</tr>
<tr>
<td>7</td>
<td>from_unixtime(bigint unixtime)</td>
<td>string</td>
<td>把时间戳秒数转化为本地地区中的字符串</td>
</tr>
<tr>
<td>8</td>
<td>from_unixtime(bigint unixtime，string pattern）</td>
<td>string</td>
<td>时间戳转化为本地时区字符串，pattern格式</td>
</tr>
<tr>
<td>9</td>
<td>from_utc_timestamp（timestamp t，string timezone）</td>
<td>timestamp</td>
<td>UTC时区指定时间戳转化为指定时区时间戳</td>
</tr>
<tr>
<td>10</td>
<td>unix_timestamp(string datetime)</td>
<td>bigint</td>
<td>把string类型的date或日期转化成时间戳Unix</td>
</tr>
<tr>
<td>11</td>
<td>unix_timestamp(timestamp datetime)</td>
<td>bigint</td>
<td>把string类型的timestamp转化成时间戳Unix</td>
</tr>
<tr>
<td>12</td>
<td>unix_timestamp(string datetime，string pattern)</td>
<td>bigint</td>
<td>日期按pattern转化成时间戳Unix</td>
</tr>
</tbody></table>
<h3 id="5-时间计算函数"><a href="#5-时间计算函数" class="headerlink" title="5. 时间计算函数"></a>5. 时间计算函数</h3><table>
<thead>
<tr>
<th>序号</th>
<th>函数/方法</th>
<th>输出类型</th>
<th>说明/样式</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>years_add(timestamp/date date, int/bigint years)</td>
<td>timestamp/date</td>
<td>增加指定年数</td>
</tr>
<tr>
<td>2</td>
<td>years_sub(timestamp/date date, int/bigint years)</td>
<td>timestamp/date</td>
<td>减少指定年数</td>
</tr>
<tr>
<td>3</td>
<td>months_add(timestamp/date date, int/bigint months)</td>
<td>timestamp/date</td>
<td>增加指定月数</td>
</tr>
<tr>
<td>4</td>
<td>months_sub(timestamp/date date, int/bigint months)</td>
<td>timestamp/date</td>
<td>减少指定月数</td>
</tr>
<tr>
<td>5</td>
<td>add_months(timestamp/date date, int/bigint months)</td>
<td>timestamp/date</td>
<td>增加指定月数</td>
</tr>
<tr>
<td>6</td>
<td>weeks_add(timestamp/date date, int/bigint weeks)</td>
<td>timestamp/date</td>
<td>增加指定周数</td>
</tr>
<tr>
<td>7</td>
<td>weeks_sub(timestamp/date date, int/bigint weeks)</td>
<td>timestamp/date</td>
<td>减少指定周数</td>
</tr>
<tr>
<td>8</td>
<td>days_add(timestamp/date startdate, int/bigint days)</td>
<td>timestamp/date</td>
<td>增加指定天数</td>
</tr>
<tr>
<td>9</td>
<td>days_sub(timestamp/date startdate, int/bigint days)</td>
<td>timestamp/date</td>
<td>减少指定天数</td>
</tr>
<tr>
<td>10</td>
<td>date_add(timestamp/date startdate, int/bigint days)</td>
<td>timestamp/date</td>
<td>增加指定天数</td>
</tr>
<tr>
<td>11</td>
<td>date_sub(timestamp/date startdate, int/bigint days)</td>
<td>timestamp/date</td>
<td>减少指定天数</td>
</tr>
<tr>
<td>12</td>
<td>adddate(timestamp/date startdate, int/int days)</td>
<td>timestamp/date</td>
<td>增加指定天数</td>
</tr>
<tr>
<td>13</td>
<td>subdate(timestamp/date startdate，bigint/int days)</td>
<td>timestamp/date</td>
<td>减少指定天数</td>
</tr>
<tr>
<td>14</td>
<td>hours_add(timestamp date, int/bigint hours)</td>
<td>timestamp</td>
<td>增加指定小时</td>
</tr>
<tr>
<td>15</td>
<td>hours_sub(timestamp date, int/bigint hours)</td>
<td>timestamp</td>
<td>减少指定小时</td>
</tr>
<tr>
<td>16</td>
<td>minutes_add(timestamp date, int/bigint minutes)</td>
<td>timestamp</td>
<td>增加指定分钟</td>
</tr>
<tr>
<td>17</td>
<td>minutes_sub(timestamp date, int/bigint minutes)</td>
<td>timestamp</td>
<td>减少指定分钟</td>
</tr>
<tr>
<td>18</td>
<td>seconds_add(timestamp date, int/bigint seconds)</td>
<td>timestamp</td>
<td>增加指定秒数</td>
</tr>
<tr>
<td>19</td>
<td>seconds_sub(timestamp date, int/bigint seconds)</td>
<td>timestamp</td>
<td>减少指定秒数</td>
</tr>
<tr>
<td>20</td>
<td>milliseconds_add(timestamp t, int/bigint s）</td>
<td>timestamp</td>
<td>增加指定毫秒数</td>
</tr>
<tr>
<td>21</td>
<td>milliseconds_sub(timestamp t, int/bigint s）</td>
<td>timestamp</td>
<td>减少指定毫秒数</td>
</tr>
<tr>
<td>22</td>
<td>microseconds_add(timestamp t, int/bigint s)</td>
<td>timestamp</td>
<td>增加指定微秒数</td>
</tr>
<tr>
<td>23</td>
<td>microseconds_sub(timestamp t, int/bigint s)</td>
<td>timestamp</td>
<td>减少指定微秒数</td>
</tr>
<tr>
<td>24</td>
<td>nanoseconds_add(timestamp t, int/bigint s）</td>
<td>timestamp</td>
<td>增加指定纳秒数</td>
</tr>
<tr>
<td>25</td>
<td>nanoseconds_sub(timestamp t, int/bigint s）</td>
<td>timestamp</td>
<td>减少指定纳秒数</td>
</tr>
<tr>
<td>26</td>
<td>date_add(timestamp/date startdate, interval_expression)</td>
<td>timestamp/date</td>
<td>使用参数计算日期增量值（增加）</td>
</tr>
<tr>
<td>27</td>
<td>date_sub(timestamp/date startdate, interval_expression)</td>
<td>timestamp/date</td>
<td>使用参数计算日期增量值（减少）</td>
</tr>
</tbody></table>
<hr>
<h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><h3 id="启动类-1"><a href="#启动类-1" class="headerlink" title="启动类"></a>启动类</h3><h3 id="key"><a href="#key" class="headerlink" title="key"></a>key</h3><table>
<thead>
<tr>
<th>命令</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>keys  *</td>
<td>查看当前库的所有键</td>
</tr>
<tr>
<td>exists <key></td>
<td>判断某个键是否存在</td>
</tr>
<tr>
<td>type <key></td>
<td>查看键的类型</td>
</tr>
<tr>
<td>del <key></td>
<td>删除某个键</td>
</tr>
<tr>
<td>expire <key> <seconds></td>
<td>为键值设置过期时间，单位秒</td>
</tr>
<tr>
<td>ttl <key></td>
<td>查看还有多久过期,-1表示永不过期,-2表示已过期</td>
</tr>
<tr>
<td>dbsize</td>
<td>查看当前数据库中key的数量</td>
</tr>
<tr>
<td>flushdb</td>
<td>清空当前库</td>
</tr>
<tr>
<td>Flushall</td>
<td>通杀全部库</td>
</tr>
</tbody></table>
<h3 id="String"><a href="#String" class="headerlink" title="String"></a>String</h3><table>
<thead>
<tr>
<th>命令</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>get <key></td>
<td>查询对应键值</td>
</tr>
<tr>
<td>set <key> <value></td>
<td>添加键值对</td>
</tr>
<tr>
<td>append <key> <value></td>
<td>将给定的<value>追加到原值的末尾</td>
</tr>
<tr>
<td>strlen <key></td>
<td>获取值的长度</td>
</tr>
<tr>
<td>setnx <key> <value></td>
<td>只有在key 不存在时设置key的值</td>
</tr>
<tr>
<td>incr <key></td>
<td>将key中存储的数字值增1只能对数字值操作，如果为空，新增值为1</td>
</tr>
<tr>
<td>decr <key></td>
<td>将key中存储的数字值减1只能对数字之操作，如果为空,新增值为-1</td>
</tr>
<tr>
<td>incrby /decrby <key> 步长</td>
<td>将key中存储的数字值增减，自定义步长</td>
</tr>
<tr>
<td>mset <key1> <value1> <key2> <value2></td>
<td>同时设置一个或多个key-value对</td>
</tr>
<tr>
<td>mget <key1> <key2>  <key3></td>
<td>同时获取一个或多个value</td>
</tr>
<tr>
<td>msetnx <key1> <value1> <key2> <value2></td>
<td>同时设置一个或多个key-value对，当且仅当所有给定的key都不存在</td>
</tr>
<tr>
<td>getrange <key> &lt;起始位置&gt; &lt;结束位置&gt;</td>
<td>获得值的范围,类似java中的substring</td>
</tr>
<tr>
<td>setrange <key> &lt;起始位置&gt; <value></td>
<td>用<value>覆盖<key>所存储的字符串值，从&lt;起始位置&gt;开始</td>
</tr>
<tr>
<td>setex <key> &lt;过期时间&gt; <value></td>
<td>设置键值的同时，设置过去时间，单位秒</td>
</tr>
<tr>
<td>getset <key> <value></td>
<td>以新换旧,设置了新值的同时获取旧值</td>
</tr>
</tbody></table>
<h3 id="List"><a href="#List" class="headerlink" title="List"></a>List</h3><table>
<thead>
<tr>
<th>命令</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>lpush/rpush  <key>  <value1>  <value2></td>
<td>从左边/右边插入一个或多个值。</td>
</tr>
<tr>
<td>lpop/rpop  <key></td>
<td>从左边/右边吐出一个值。值在键在，值光键亡。</td>
</tr>
<tr>
<td>rpoplpush  <key1>  <key2></td>
<td>从<key1>列表右边吐出一个值，插到<key2>列表左边</td>
</tr>
<tr>
<td>lrange <key> <start> <stop></td>
<td>按照索引下标获得元素(从左到右)</td>
</tr>
<tr>
<td>lindex <key> <index></td>
<td>按照索引下标获得元素(从左到右)</td>
</tr>
<tr>
<td>llen <key></td>
<td>获得列表长度</td>
</tr>
<tr>
<td>linsert <key>  before <value>  <newvalue></td>
<td>在<value>的后面插入<newvalue> 插入值</td>
</tr>
<tr>
<td>lrem <key> <n>  <value></td>
<td>从左边删除n个value(从左到右)</td>
</tr>
</tbody></table>
<h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><table>
<thead>
<tr>
<th>命令</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>sadd <key>  <value1>  <value2> ….</td>
<td>将一个或多个 member 元素加入到集合 key 当中，已经存在于集合的 member 元素将被忽略。</td>
</tr>
<tr>
<td>smembers <key></td>
<td>取出该集合的所有值。</td>
</tr>
<tr>
<td>sismember <key>  <value></td>
<td>判断集合<key>是否为含有该<value>值，有返回1，没有返回0</td>
</tr>
<tr>
<td>scard  <key></td>
<td>返回该集合的元素个数。</td>
</tr>
<tr>
<td>srem <key> <value1> <value2> ….</td>
<td>删除集合中的某个元素。</td>
</tr>
<tr>
<td>spop <key></td>
<td>随机从该集合中吐出一个值。</td>
</tr>
<tr>
<td>srandmember <key> <n></td>
<td>随机从该集合中取出n个值。不会从集合中删除</td>
</tr>
<tr>
<td>sinter <key1> <key2></td>
<td>返回两个集合的交集元素。</td>
</tr>
<tr>
<td>sunion <key1> <key2></td>
<td>返回两个集合的并集元素。</td>
</tr>
<tr>
<td>sdiff <key1> <key2></td>
<td>返回两个集合的差集元素。</td>
</tr>
</tbody></table>
<h3 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h3><table>
<thead>
<tr>
<th>命令</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>hset <key>  <field>  <value></td>
<td>给<key>集合中的  <field>键赋值<value></td>
</tr>
<tr>
<td>hget <key1>  <field></td>
<td>从<key1>集合<field> 取出 value</td>
</tr>
<tr>
<td>hmset <key1>  <field1> <value1> <field2> <value2>…</td>
<td>批量设置hash的值</td>
</tr>
<tr>
<td>hexists key  <field></td>
<td>查看哈希表 key 中，给定域 field 是否存在。</td>
</tr>
<tr>
<td>hkeys <key></td>
<td>列出该hash集合的所有field</td>
</tr>
<tr>
<td>hvals <key></td>
<td>列出该hash集合的所有value</td>
</tr>
<tr>
<td>hincrby <key> <field>  <increment></td>
<td>为哈希表 key 中的域 field 的值加上增量 increment</td>
</tr>
<tr>
<td>hsetnx <key>  <field> <value></td>
<td>将哈希表 key 中的域 field 的值设置为 value ，当且仅当域 field 不存在</td>
</tr>
</tbody></table>
<h3 id="zset-Sorted-set"><a href="#zset-Sorted-set" class="headerlink" title="zset(Sorted set)"></a>zset(Sorted set)</h3><table>
<thead>
<tr>
<th>命令</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>zadd  <key> <score1> <value1>  <score2> <value2>…</td>
<td>将一个或多个 member 元素及其 score 值加入到有序集 key 当中</td>
</tr>
<tr>
<td>zrange <key>  <start> <stop>  [WITHSCORES]</td>
<td>返回有序集 key 中，下标在<start> <stop>之间的元素带WITHSCORES，可以让分数一起和值返回到结果集。</td>
</tr>
<tr>
<td>zrangebyscore key min max [withscores] [limit offset count]</td>
<td>返回有序集 key 中，所有 score 值介于 min 和 max 之间(包括等于 min 或 max )的成员。有序集成员按 score 值递增(从小到大)次序排列。</td>
</tr>
<tr>
<td>zrevrangebyscore key max min [withscores] [limit offset count]</td>
<td>同上，改为从大到小排列。</td>
</tr>
<tr>
<td>zincrby <key> <increment> <value></td>
<td>为元素的score加上增量</td>
</tr>
<tr>
<td>zrem  <key>  <value></td>
<td>删除该集合下，指定值的元素</td>
</tr>
<tr>
<td>zcount <key>  <min>  <max></td>
<td>统计该集合，分数区间内的元素个数</td>
</tr>
<tr>
<td>zrank <key>  <value></td>
<td>返回该值在集合中的排名，从0开始。</td>
</tr>
</tbody></table>
<hr>
<h2 id="Flink"><a href="#Flink" class="headerlink" title="Flink"></a>Flink</h2><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./start-cluster.sh </span><br></pre></td></tr></table></figure>

<h3 id="run"><a href="#run" class="headerlink" title="run"></a>run</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/flink run [OPTIONS]./bin/flink run -m yarn-cluster -c com.wang.flink.WordCount /opt/app/WordCount.jar</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>OPTIONS</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>-d</td>
<td>detached 是否使用分离模式</td>
</tr>
<tr>
<td>-m</td>
<td>jobmanager 指定提交的jobmanager</td>
</tr>
<tr>
<td>-yat</td>
<td>–yarnapplicationType 设置yarn应用的类型</td>
</tr>
<tr>
<td>-yD</td>
<td>使用给定属性的值</td>
</tr>
<tr>
<td>-yd</td>
<td>–yarndetached 使用yarn分离模式</td>
</tr>
<tr>
<td>-yh</td>
<td>–yarnhelp yarn session的帮助</td>
</tr>
<tr>
<td>-yid</td>
<td>–yarnapplicationId 挂到正在运行的yarnsession上</td>
</tr>
<tr>
<td>-yj</td>
<td>–yarnjar Flink jar文件的路径</td>
</tr>
<tr>
<td>-yjm</td>
<td>–yarnjobManagerMemory jobmanager的内存(单位M)</td>
</tr>
<tr>
<td>-ynl</td>
<td>–yarnnodeLabel 指定 YARN 应用程序 YARN 节点标签</td>
</tr>
<tr>
<td>-ynm</td>
<td>–yarnname 自定义yarn应用名称</td>
</tr>
<tr>
<td>-yq</td>
<td>–yarnquery 显示yarn的可用资源</td>
</tr>
<tr>
<td>-yqu</td>
<td>–yarnqueue 指定yarn队列</td>
</tr>
<tr>
<td>-ys</td>
<td>–yarnslots 指定每个taskmanager的slots数</td>
</tr>
<tr>
<td>-yt</td>
<td>yarnship 在指定目录中传输文件</td>
</tr>
<tr>
<td>-ytm</td>
<td>–yarntaskManagerMemory 每个taskmanager的内存</td>
</tr>
<tr>
<td>-yz</td>
<td>–yarnzookeeperNamespace 用来创建ha的zk子路径的命名空间</td>
</tr>
<tr>
<td>-z</td>
<td>–zookeeperNamespace 用来创建ha的zk子路径的命名空间</td>
</tr>
<tr>
<td>-p</td>
<td>并行度</td>
</tr>
<tr>
<td>-yn</td>
<td>需要分配的YARN容器个数(=任务管理器的数量)</td>
</tr>
</tbody></table>
<h3 id="info"><a href="#info" class="headerlink" title="info"></a>info</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/flink info [OPTIONS]</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>OPTIONS</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>-c</td>
<td>程序进入点，主类</td>
</tr>
<tr>
<td>-p</td>
<td>并行度</td>
</tr>
</tbody></table>
<h3 id="list"><a href="#list" class="headerlink" title="list"></a>list</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/flink list [OPTIONS]</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>OPTIONS</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>-a</td>
<td>–all 显示所有应用和对应的job id</td>
</tr>
<tr>
<td>-r</td>
<td>–running 显示正在运行的应用和job id</td>
</tr>
<tr>
<td>-s</td>
<td>–scheduled 显示调度的应用和job id</td>
</tr>
<tr>
<td>-m</td>
<td>–jobmanager 指定连接的jobmanager</td>
</tr>
<tr>
<td>-yid</td>
<td>–yarnapplicationId 挂到指定的yarn id对应的yarn session上</td>
</tr>
<tr>
<td>-z</td>
<td>–zookeeperNamespace 用来创建ha的zk子路径的命名空间</td>
</tr>
</tbody></table>
<h3 id="stop"><a href="#stop" class="headerlink" title="stop"></a>stop</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/flink stop  [OPTIONS] &lt;Job ID&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>OPTIONS</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>-d</td>
<td>在采取保存点和停止管道之前，发送MAX_WATERMARK</td>
</tr>
<tr>
<td>-p</td>
<td>savepointPath 保存点的路径 ‘xxxxx’</td>
</tr>
<tr>
<td>-m</td>
<td>–jobmanager 指定连接的jobmanager</td>
</tr>
<tr>
<td>-yid</td>
<td>–yarnapplicationId 挂到指定的yarn id对应的yarn session上</td>
</tr>
<tr>
<td>-z</td>
<td>–zookeeperNamespace 用来创建ha的zk子路径的命名空间</td>
</tr>
</tbody></table>
<h3 id="cancel-弱化"><a href="#cancel-弱化" class="headerlink" title="cancel(弱化)"></a>cancel(弱化)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/flink cancel  [OPTIONS] &lt;Job ID&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>OPTIONS</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>-s</td>
<td>使用 “stop “代替</td>
</tr>
<tr>
<td>-D</td>
<td>允许指定多个通用配置选项</td>
</tr>
<tr>
<td>-m</td>
<td>要连接的JobManager的地址</td>
</tr>
<tr>
<td>-yid</td>
<td>–yarnapplicationId 挂到指定的yarn id对应的yarn session上</td>
</tr>
<tr>
<td>-z</td>
<td>–zookeeperNamespace 用来创建ha的zk子路径的命名空间</td>
</tr>
</tbody></table>
<h3 id="savepoint"><a href="#savepoint" class="headerlink" title="savepoint"></a>savepoint</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/flink savepoint  [OPTIONS] &lt;Job ID&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>OPTIONS</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>-d</td>
<td>要处理的保存点的路径</td>
</tr>
<tr>
<td>-j</td>
<td>Flink程序的JAR文件</td>
</tr>
<tr>
<td>-m</td>
<td>要连接的JobManager的地址</td>
</tr>
<tr>
<td>-yid</td>
<td>–yarnapplicationId 挂到指定的yarn id对应的yarn session上</td>
</tr>
<tr>
<td>-z</td>
<td>–zookeeperNamespace 用来创建ha的zk子路径的命名空间</td>
</tr>
</tbody></table>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>版权声明： </strong>
          
          本博客所有文章除特别声明外，著作权归作者所有。转载请注明出处！
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://ylxlogan.top/2021/12/23/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/BigData/" rel="tag">BigData</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2021/12/23/%E7%9F%A5%E8%AF%86%E7%A2%8E%E7%89%87/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            知识碎片
          
        </div>
      </a>
    
    
      <a href="/2021/12/23/MySQL%E6%9D%82%E8%AE%B0/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">MySQL杂记</div>
      </a>
    
  </nav>

   
<!-- valine评论 -->
<div id="vcomments-box">
  <div id="vcomments"></div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script>
<script>
  new Valine({
    el: "#vcomments",
    app_id: "GrJ0j9xyLU5BKd9RsgY4Xsub-gzGzoHsz",
    app_key: "JHTKI05eA7ieHmjdXeBqTVfz",
    path: window.location.pathname,
    avatar: "monsterid",
    placeholder: "给我的文章加点评论吧~",
    recordIP: true,
  });
  const infoEle = document.querySelector("#vcomments .info");
  if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
    infoEle.childNodes.forEach(function (item) {
      item.parentNode.removeChild(item);
    });
  }
</script>
<style>
  #vcomments-box {
    padding: 5px 30px;
  }

  @media screen and (max-width: 800px) {
    #vcomments-box {
      padding: 5px 0px;
    }
  }

  #vcomments-box #vcomments {
    background-color: #fff;
  }

  .v .vlist .vcard .vh {
    padding-right: 20px;
  }

  .v .vlist .vcard {
    padding-left: 10px;
  }
</style>

 
   
     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2021-2022
        <i class="ri-heart-fill heart_icon"></i> Y-tim
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/logal.jpg" alt="Y-tim"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->
 
<script src="/js/clickBoom2.js"></script>
 
<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->
 
<script src="/js/dz.js"></script>
 
<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>